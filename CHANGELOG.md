# Changelog

Все важные изменения в проекте NesExtractor будут задокументированы в этом файле.

## [Unreleased]

### Added
- Internationalization using .resx resources (default: English).
- Localization markup `{l:Loc Key}` and `LocalizationManager`.
- Localized main views (`MainWindow`, `FileTabView`) and graphics export dialogs.
- Russian translation (`Strings.ru.resx`) added.

### Добавлено
- ✅ Библиотека NesExtractor.Core для работы с NES файлами
- ✅ Модель NesHeader с полным разбором заголовка iNES/NES 2.0
- ✅ Модель NesRom для представления ROM файла
- ✅ Парсер NesRomParser для чтения и валидации NES файлов
- ✅ 14 модульных тестов (100% покрытие парсера)
- ✅ Файловый диалог для открытия .nes файлов
- ✅ Система табов для работы с несколькими файлами
- ✅ FileTabView с разделением 30:70 (информация + графика)
- ✅ Панель информации о картридже (mapper, ROM размеры, mirroring и т.д.)
- ✅ Обработка ошибок с UI уведомлениями
- ✅ Горячие клавиши (Ctrl+O, Ctrl+W, Ctrl+Q)
- ✅ Проверка на дубликаты открытых файлов
- ✅ Empty state когда нет открытых файлов

### Реализовано
- Чтение заголовка NES (16 байт)
- Извлечение PRG ROM (программный код)
- Извлечение CHR ROM (графические данные)
- Поддержка Trainer секции (512 байт)
- Определение типа маппера (NROM, MMC1, UxROM и др.)
- Определение типа mirroring (Horizontal/Vertical/FourScreen)
- Поддержка форматов iNES 1.0 и NES 2.0

### Добавлено в последнем обновлении

**Визуализация графики:**
- ✅ Визуализация графики из CHR ROM
- ✅ Извлечение и декодирование тайлов (8×8 пикселей, 2 bitplanes)
- ✅ Отображение панно с тайлами
- ✅ Зум (0.1x - 10x) с кнопками +/−/100%
- ✅ Прокрутка панно (ScrollViewer)
- ✅ Настраиваемый спейсинг между тайлами (0-4px)
- ✅ Экспорт панно в PNG файл
- ✅ Экспорт всех тайлов в отдельные файлы
- ✅ Greyscale палитра (4 оттенка)
- ✅ Информация о количестве тайлов
- ✅ Nearest neighbor интерполяция (без размытия)

**Улучшения дизайна:**
- ✅ Кастомные стили для табов (TabStyles.axaml)
- ✅ Красивая кнопка закрытия таба с hover эффектом
- ✅ Нижняя граница акцентного цвета для активного таба
- ✅ Плавные анимации переходов (150ms)
- ✅ Улучшенные кнопки экспорта с hover эффектами
- ✅ Стилизованные кнопки зума
- ✅ Обновленный Empty State с приветствием
- ✅ Информационная панель с возможностями
- ✅ Тултипы для всех интерактивных элементов
- ✅ Единая система отступов и цветов
- ✅ Адаптация к системной теме (светлая/темная)

**Улучшения дизайна (обновление):**
- ✅ Объемные табы с фоном и скругленными углами
- ✅ Контрастная полоса под табами
- ✅ Активный таб "выступает" из панели (-1px margin)
- ✅ Фикс растягивания панелей в FileTabView (30:70)

**Палитры и прозрачность (исправлено):**
- ✅ Greyscale по умолчанию (честный способ показать CHR ROM)
- ✅ Стандартная палитра NES (64 цвета PPU 2C02)
- ✅ 10 предустановленных палитр для визуализации
- ✅ Чекбокс "Прозрачность" для индекса 0
- ✅ Шахматный фон при включенной прозрачности (как в Photoshop)
- ✅ ComboBox для выбора палитры в UI
- ✅ Автоматическая перерисовка при смене палитры
- ✅ Экспорт с выбранной палитрой и настройками прозрачности
- ⚠️ **Важно**: Палитры НЕ хранятся в .NES файле (как в YY-CHR)

### В разработке
- Редактирование палитр
- Выделение отдельных тайлов
- Колесико мыши для зума

## [0.1.0] - 2025-11-16

### Первый релиз
- Инициализация проекта
- Базовая структура Avalonia приложения
- Настройка решения (src/, tests/)
- Создание документации (TZ/)

