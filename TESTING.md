# Тестирование NesExtractor

## Где взять тестовые NES ROM файлы

### Легальные источники

1. **Homebrew игры** (свободно распространяемые):
   - https://nesdir.github.io/ - каталог homebrew игр для NES
   - https://pdroms.de/nintendo-entertainment-system-nes - homebrew ROM'ы

2. **Тестовые ROM'ы**:
   - `nestest.nes` - стандартный тестовый ROM для эмуляторов
   - `hello.nes` - простой Hello World ROM

### Создание тестового ROM

Вы можете создать простой тестовый файл для проверки парсера:

```bash
# Пример создания минимального NES файла (только заголовок)
echo -ne '\x4E\x45\x53\x1A\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00' > test.nes
```

## Запуск тестов

### Модульные тесты

```bash
# Все тесты
dotnet test

# С подробным выводом
dotnet test --logger "console;verbosity=detailed"

# Только тесты парсера
dotnet test --filter "FullyQualifiedName~NesRomParserTests"
```

### Тестирование UI

1. Запустите приложение:
```bash
dotnet run --project src/NesExtractor/NesExtractor.csproj
```

2. Проверьте функции:
   - ✅ Открытие файла через меню (Ctrl+O)
   - ✅ Открытие нескольких файлов
   - ✅ Отображение информации о картридже
   - ✅ Закрытие таба (Ctrl+W)
   - ✅ Обработка ошибок (неверный формат)
   - ✅ Дубликаты файлов (открытие уже открытого файла)

## Ожидаемые результаты

### Валидные NES файлы

При открытии корректного NES файла должна отображаться информация:
- Имя файла
- Размер файла
- Формат (iNES / NES 2.0)
- PRG ROM размер и количество банков
- CHR ROM размер и количество банков
- Номер и название маппера
- Тип mirroring
- Наличие Battery RAM
- Наличие Trainer

### Невалидные файлы

При попытке открыть невалидный файл должно появиться сообщение об ошибке в верхней части окна.

## Примеры популярных игр и их характеристики

| Игра | Mapper | PRG ROM | CHR ROM | Mirroring |
|------|--------|---------|---------|-----------|
| Super Mario Bros | 0 (NROM) | 32 KB | 8 KB | Horizontal |
| Mega Man 2 | 1 (MMC1) | 128 KB | 0 KB (CHR RAM) | Horizontal |
| Castlevania | 2 (UxROM) | 128 KB | 128 KB | Vertical |
| Super Mario Bros 3 | 4 (MMC3) | 256 KB | 128 KB | Horizontal |

## Известные ограничения

- Визуализация графики пока не реализована (отображается заглушка)
- Поддержка только форматов iNES 1.0 и NES 2.0
- Нет поддержки других форматов (UNIF, FDS и т.д.)

## Отчет о багах

Если вы обнаружили баг, создайте issue с описанием:
1. Какой файл вызвал проблему (если возможно, приложите файл)
2. Что ожидалось
3. Что произошло на самом деле
4. Шаги для воспроизведения
5. Ваша ОС и версия .NET

